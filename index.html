<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>葱妹和蒜姐</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <style type="text/css">
        @font-face {
            font-family: digit;
            src: url('digital-7_mono.ttf') format("truetype");
        }
        
        /* 基础样式重置 */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
        
        /* 添加这个样式来初始隐藏文字 */
        #code {
            display: none;
        }
        
        /* 登录框核心样式 */
        #login-box {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #FFFFEF;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
    
        .login-container {
            background: #ffffff;
            padding: 40px 50px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 300px;
            width: 90%;
        }
    
        .login-container h2 {
            margin: 0 0 25px;
            color: #d46abf;
            font-size: 28px;
            font-weight: bold;
        }
    
        .login-container input {
            width: 100%;
            padding: 12px;
            margin: 15px 0;
            border: 1px solid #f2a8d4;
            border-radius: 10px;
            font-size: 16px;
            outline: none;
            box-sizing: border-box;
            text-align: center;
            transition: all 0.3s ease;
        }
    
        .login-container input:focus {
            border-color: #f7c4e9;
            box-shadow: 0 0 8px rgba(247, 196, 233, 0.5);
        }
    
        .login-container button {
            background: #f78fb3;
            color: #ffffff;
            border: none;
            padding: 14px 35px;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            transition: background 0.3s, transform 0.3s;
            margin-top: 15px;
        }
    
        .login-container button:hover {
            background: #f06292;
            transform: translateY(-3px);
        }
    
        .error-msg {
            color: #ff6b6b;
            margin: 10px 0 0;
            display: none;
            font-size: 15px;
        }
    
        /* 调整音乐控制按钮位置 */
        #musicControl {
            position: fixed;
            bottom: 10px;  /* 减小底部距离 */
            right: 20px;
            z-index: 999;
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid #ddd;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            display: none;
        }

        #musicControl:hover {
            background: rgba(255, 255, 255, 0.9);
        }
    
        /* 响应式设计增强 */
        @media screen and (max-width: 768px) {
            #mainDiv {
                transform: scale(0.45);
                transform-origin: top center;
                width: 100%;
                height: 100%;
                overflow: hidden;
                position: absolute;
                top: 0;
                left: 0;
            }
            
            #content {
                width: 100%;
                position: relative;
            }

            #loveHeart {
                float: left;
                width: 670px;
                height: 625px;
                position: relative; /* 添加相对定位 */
            }

            /* 重要：调整messages的位置 */
            #words {
                position: absolute; /* 改为绝对定位 */
                left: 50%;        /* 水平居中 */
                top: 50%;         /* 垂直居中 */
                transform: translate(-50%, -50%); /* 完全居中 */
                width: 500px;
                font-size: 24px;
                color: #666;
                text-align: center; /* 文字居中 */
                z-index: 1;      /* 确保在garden上层 */
            }

            #messages {
                width: 100%;     /* 宽度100% */
                text-align: center; /* 文字居中 */
            }

            #garden {
                width: 100%;
                height: 100%;
                position: relative; /* 添加相对定位 */
            }

            #musicControl {
                transform: scale(2);
                bottom: 40px;
                right: 40px;
                z-index: 1000; /* 确保在最上层 */
            }
        }

        /* 横屏时的调整 */
        @media screen and (orientation: landscape) and (max-height: 480px) {
            #mainDiv {
                transform: scale(0.6);  /* 横屏时可以稍大一些 */
                transform-origin: top center;
            }

            #musicControl {
                transform: scale(1.5);
                bottom: 20px;
                right: 20px;
            }
        }

        /* 特小屏幕的额外调整 */
        @media screen and (max-width: 360px) {
            #mainDiv {
                transform: scale(0.4);  /* 更小的屏幕更大的缩放 */
            }
        }

        /* iPhone SE 等超小屏幕的特殊处理 */
        @media screen and (max-width: 320px) {
            #mainDiv {
                transform: scale(0.35);
            }
        }

        /* 确保iPad等中等尺寸设备的显示 */
        @media screen and (min-width: 768px) and (max-width: 1024px) {
            #mainDiv {
                transform: scale(0.8);
                transform-origin: top center;
            }
        }
    </style>
    <link href="css/default.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/garden.js"></script>
    <script type="text/javascript" src="js/functions.js"></script>
</head>

<body>
    <!-- 登录框 -->
    <div id="login-box">
        <div class="login-container">
            <h2>请输入密码</h2>
            <input type="password" id="password" placeholder="输入密码...">
            <button onclick="checkPassword()">进入</button>
            <p class="error-msg" id="error-msg">密码错误，请重试</p>
        </div>
    </div>

    <div id="musicControl">暂停音乐</div>

    <audio id="bgMusic" autoplay loop>
        <source src="./music/background.mp3" type="audio/mp3">
    </audio>

    <div id="mainDiv">
        <div id="content">
            <div id="code">
                傻瓜。<br />
                我爱你，我知道你肯定会很无奈的说我知道你爱我呢。<br />
                我想你，就像坐华师地铁线时总想遇见那个你相像的女孩。<br />
                想你的时候，就会特别嫉妒汉子。<br />
                嫉妒她和你一起上课吃饭逛街，我总是极度抱怨的说为什么不是我。<br />
                陪你跑步，陪你自习，和你睡上下铺的人为什么不是我呢。<br />
                也就这时候我才发现我是有多小心眼。<br />
                还记得我们说好的两居室吗。<br />
                一卧室一书房，我们可以在客厅跳舞弹琴。<br />
                房子不要很大，只要里面有我和你。<br />
                对了，你还说要放加湿器，你怕我流鼻血。<br />
                还记得有一天我对你说了很多遍想你吗。想你，只剩下这句话的时候。<br />
                你不知道我的生活会有多空虚，<br />
                只因其他填充不了它的空缺。<br />
                还记得我说过不要和五六个人做的伴娘吗。<br />
                因为我不是唯一的伴娘，我会生气的。<br />
                还有，我怕我舍不得你出嫁，抢婚了怎么办。<br />
                嘿嘿，有木有好傻。但我就是这么想的。<br />
                我想看到你幸福，但我不想看着你跟别人走。<br />
                小傻瓜，我想你。<br />
                累了，难过了不许哭鼻子。<br />
                你想去月球想去火星我都会陪着你。<br />
                只要你快乐。<br />
                小傻瓜，我爱你。<br />
                我总会习惯逛商场就会想要给你买衣服买干豆片买很多你爱吃的零食。<br />
                一盒干豆片你却能吃上一个学期。<br />
                可听到你说因减肥不吃晚饭的时候你不知道我有多担心你。<br />
                傻瓜，你多肥多"丑"我都会爱你。<br />
                只要你健康。<br />
                争吵也好，离别也好，我都爱你。
            </div>
            <div id="loveHeart">
                <canvas id="garden"></canvas>
                <div id="words">
                    <div id="messages">
                        <font color="#66B032">葱妹</font>和<font color="#D8BFD8">蒜姐</font>在一起<span class="STYLE1">已经....</span>
                        <div id="elapseClock"></div>
                    </div>
                    <div id="loveu">
                        Since 2008-12-13.<br/>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        var audio = document.getElementById('bgMusic');
        var musicControl = document.getElementById('musicControl');
        var isPlaying = false;
        var offsetX = $("#loveHeart").width() / 2;
        var offsetY = $("#loveHeart").height() / 2 - 55;
        var together = new Date();
        together.setFullYear(2008, 12, 13);
        together.setHours(0);
        together.setMinutes(0);
        together.setSeconds(0);
        together.setMilliseconds(0);

        // 密码验证函数
        function checkPassword() {
            var password = document.getElementById('password').value;
            if (password === "20081213") {
                // 隐藏登录框
                document.getElementById('login-box').style.display = 'none';
                // 显示音乐控制按钮
                document.getElementById('musicControl').style.display = 'block';
                // 开始播放音乐
                startMusic();
                // 初始化动画
                startAnimation();
            } else {
                document.getElementById('error-msg').style.display = 'block';
            }
        }

        // 音乐控制函数
        function startMusic() {
            audio.play().then(function() {
                isPlaying = true;
                updateButtonText();
            }).catch(function(error) {
                console.log("播放失败:", error);
            });
        }

        function updateButtonText() {
            musicControl.textContent = isPlaying ? '暂停音乐' : '播放音乐';
        }

        function togglePlay() {
            if (isPlaying) {
                audio.pause();
            } else {
                audio.play();
            }
            isPlaying = !isPlaying;
            updateButtonText();
        }

        // 音乐控制事件监听
        musicControl.addEventListener('click', togglePlay);

        // 启动动画和计时器
        function startAnimation() {
            if (!document.createElement('canvas').getContext) {
                var msg = document.createElement("div");
                msg.id = "errorMsg";
                msg.innerHTML = "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+"; 
                document.body.appendChild(msg);
                $("#code").css("display", "none")
                $("#copyright").css("position", "absolute");
                $("#copyright").css("bottom", "10px");
                document.execCommand("stop");
            } else {
                // 启动心形动画
                startHeartAnimation();
                
                // 启动并持续更新时间
                timeElapse(together);
                setInterval(function () {
                    timeElapse(together);
                }, 500);
                
                // 调整代码位置
                adjustCodePosition();
                
                // 显示代码区域
                $("#code").css("display", "block");
            }
        }

        // 监听回车键
        document.getElementById('password').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });
    </script>
</body>
</html>